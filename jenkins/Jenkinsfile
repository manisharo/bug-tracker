pipeline {
    agent any

    stages {
        stage('Unit Tests - Backend') {
          agent {
              docker {
                 image 'snakee/golang-junit:1.21'
                 reuseNode true
              }
          }
            steps {
                dir('bugtracker-backend'){
                        export GOCACHE="${WORKSPACE}/.go-cache"
                        go build
                       sh 'go test -v ./...'
             }
            }
        }
    }
}
